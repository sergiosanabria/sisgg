{% extends app.request.isXmlHttpRequest ? "::ajax.html.twig" : "SisGGFinalBundle:Cajero:cajero.html.twig" %}
{%if form%}{% form_theme form "SisGGFinalBundle:Form:fields.html.twig" %}{%endif%}
{%block ruta%}
<li>
    <a href="#">Inicio</a> <span class="divider">/</span>
</li>
<li>
    <a href="#">Clientes</a> <span class="divider">/</span>
</li>
<li>
    <a href="#">Nuevo Cliente</a>
</li>
{%endblock%}
{% block content %}
<div class="row-fluid sortable">
    <div class="box span12">
        <div class="box-content">
            <legend>Detalles del Cliente
                <div class="btn-group" style='float:right;'>
                    <a title="Editar cliente" href="{{path('editar_cliente')}}?id={{id}}" class="btn"><i class=" fa-icon-edit"></i></a>
                    <a class="btn"><i class="icon-print"></i></a>
                </div>
                <small>
                    <ul class="nav nav-pills" id="myTab">
                        <li class="active"><a href="#general">General</a></li>
                        <li><a href="#descuentos">Descuentos</a></li>
                        <li><a href="#grupos">Grupos de Cliente</a></li>
                    </ul>
                </small>
            </legend>
            <form id='formCliente' name="cliente" class="form-horizontal" method="post">
                <fieldset id="formNuevoCliente">
                    <div class="tab-content">
                        <div class="tab-pane active" id="general">
                            <div class="span6 pull-left">
                                <div class='control-group'>
                                    <label class='control-label'>Teléfono</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span2' disabled='disabled' value='{{cliente.telefono.nacional}}'/>
                                        <input type="text" class='span3' disabled='disabled' value='{{cliente.telefono.caracteristica}}'/>
                                        <input type="text" class='span4' disabled='disabled' value='{{cliente.telefono.numero}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Apellido</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.apellido}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Nombre</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.nombre}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Tipo de Documento</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.tipoDocumento}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Documento</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.documento}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Email</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.email}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Condicion Iva</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.condicionIva}}'/>
                                    </div>
                                </div>
                                <div class='control-group'>
                                    <label class='control-label'>Cuit</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.cuit}}'/>
                                    </div>
                                </div>
                            </div>
                            <div class="span6 pull-right">
                                <div class='control-group'>
                                    <label class='control-label'>Provincia</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.ciudad.provincia}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Ciudad</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.ciudad}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Calle</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.calle}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Numero</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.numero}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Manzana</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.manzana}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Edificio</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.edificio}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>Escalera</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.escalera}}'/>
                                    </div>
                                </div> 
                                <div class='control-group'>
                                    <label class='control-label'>piso</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.piso}}'/>
                                    </div>
                                </div>    
                                <div class='control-group'>
                                    <label class='control-label'>Departamento</label>
                                    <div class='controls controls-row'>
                                        <input type="text" class='span9' disabled='disabled' value='{{cliente.direccion.departamento}}'/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane active" id="descuentos">
                            <table class="table table-striped table-bordered" id="clientes">
                                <thead class="header">
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Descripcion</th>
                                        <th>Porcentaje</th>
                                        <th>Mínimo</th>
                                        <th>Máximo</th>
                                    </tr>
                                </thead>
                                <tbody>     
                                {% for descuentoCliente in cliente.descuentosActivos%}  
                                        <tr>
                                            <td>{{descuentoCliente.nombre}}</td>
                                            <td {%if descuentoCliente.descripcion|trim != ''%}>{{descuentoCliente.descripcion}}{%else%}style='text-align: center'>---{%endif%}</td>
                                            <td {%if descuentoCliente.porcentaje|trim != ''%}style='text-align: right'>{{descuentoCliente.porcentaje}}{%else%}style='text-align: center'>---{%endif%}</td>
                                            <td {%if descuentoCliente.maximo|trim != ''%}style='text-align: right'>{{descuentoCliente.maximo}}{%else%}style='text-align: center'>---{%endif%}</td>
                                            <td {%if descuentoCliente.minimo|trim != ''%}style='text-align: right'>{{descuentoCliente.minimo}}{%else%}style='text-align: center'>---{%endif%}</td>
                                        </tr>    
                                {% endfor %}       
                                    </tbody>
                                </table> 
                            </div>


                            <div class="tab-pane active" id="grupos">
                                <table class="table table-striped table-bordered" id="clientes">
                                    <thead class="header">
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Descripcion</th>
                                            <th>Numero de descuentos</th>
                                        </tr>
                                    </thead>
                                    <tbody>      
                                        {% for grupoCliente in cliente.gruposActivos%}  
                                            <tr>
                                                <td>{{grupoCliente.nombre}}</td>
                                                <td {%if grupoCliente.descripcion|trim != ''%}>{{grupoCliente.descripcion}}{%else%}style='text-align: center'>---{%endif%}</td>
                                                <td style='text-align: right'>{{grupoCliente.descuentosActivos|length}}</td>
                                            </tr>     
                                        {% endfor %}       
                                        </tbody>
                                    </table> 
                                </div>

                            </div>
                        </fieldset>   
                    </form>
                </div>
            </div><!--/span-->
        </div><!--/row-->
{% endblock %}
{%block javascripts%}
{{parent()}}
        <script type="text/javascript">
            $().ready(function() {
                $("#myTab a").each(function() {
                    $(this).tab("show");
                });
                $("#myTab a:first").each(function() {
                    $(this).tab("show");
                });
            });
            </script>    
{%endblock%}

